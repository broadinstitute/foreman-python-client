# Autogeneration

This library is autogenerated using [swagger-codegen][1]. It uses the
`swaggerapi/swagger-codegen-cli` Docker image that is built by the project, so no
installation should be necessary.

## Setup

To get the [Swagger][4] JSON needed to run the generator, you need a working
[Foreman][3] server. You can use a rake task on the [Foreman][3] server to generate a
directory of files for use with this generator. On a [Foreman][3] server, the following
should do the trick:

```sh
mkdir /tmp/foreman
foreman-rake apipie:static_swagger_json OUT=/tmp/foreman
cd /tmp/foreman
tar -zcf foreman.tar.gz foreman
```

You can then transfer that tar file to this (`autogen`) directory and untar the file,
which should create the `foreman` directory. That directory should now have the file
needed by the [swagger-codegen][1] generator.

## Local Requirements for Autogen

The requirements for running the `autogen.sh` script are:

* Some version of [Docker][2] so that a container can be started.
* [pre-commit](https://pre-commit.com/) must be installed as it is used to do some
post-generation cleanup.

## Regenerating the library

The `autogen.sh` script in this directory should correctly regenerate
everything in this repository.

## Manually Curated Files

Not all the files in the repository are autogenerated. There are several administrative
files that are manually updated as part of the process.

* `.editorconfig`
* `.green`
* `.pre-commit-config.yaml`
* `.yamllint`
* `poetry.lock`: This file will be updated by dependabot as well as when any changes are
made to `pyproject.toml`.
* `pyproject.toml`: Any time the code is autogenerated again, it is important to look at
the `requirements.txt` and `test-requirements.txt` files to see if there have been any
changes. Dependencies from `requirements.txt` go in the `tool.poetry.dependencies`
section, and dependencies from `test-requirements.txt` go in
`tool.poetry.dev-dependencies`.

[1]: https://swagger.io/docs/open-source-tools/swagger-codegen/ "swagger-codegen"
[2]: https://www.docker.com/ "Docker"
[3]: https://theforeman.org/ "Foreman"
[4]: https://swagger.io/ "Swagger"
